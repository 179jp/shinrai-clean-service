---
import campaignSource from '../content/campaign.mdx?raw';

const sections = campaignSource
  .split('### ')
  .filter(Boolean)
  .map((chunk) => {
    const lines = chunk.split('\n').filter((line) => line.trim().length);
    const title = lines.shift()?.trim() ?? '';
    const items = lines
      .filter((line) => line.startsWith('- '))
      .map((line) => line.replace(/^-\s*/, '').trim());

    return { title, items };
  });
---

<div class="campaign-block">
  <div class="section__header">
    <p class="eyebrow">Campaign Infomation</p>
    <h3>キャンペーン情報</h3>
  </div>
  <div class="campaign-grid">
    {
      sections.map((section) => (
        <article class="panel panel--muted markdown">
          <h3>{section.title}</h3>
          <ul>
            {section.items.map((item) => (
              <li>{item}</li>
            ))}
          </ul>
        </article>
      ))
    }
  </div>
</div>
